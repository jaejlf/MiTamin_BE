ifndef::snippets[]
:snippets: /MyTamin_BE/build/generated-snippets
endif::[]

= 💊 My Tamin API Document

NOTE: 업데이트 내역

* 2022.09.23.금 : 회원가입/로그인/이메일, 닉네임 중복 체크 API 구현
* 2022.09.24.토 : 회원가입 API -> PASSWORD_PATTERN_ERROR 추가 (*비밀번호 패턴 서버 측과 일치하는지 체크)
* 2022.09.26.월 : 홈 화면 관련 API 구현 (세부 로직 구현 전이지만, 업데이트 후에도 response는 동일할 예정임)

'''

== Auth
=== 회원 가입
* 마이타민 섭취 시간(mytaminHour, mytaminMin) 데이터는 필수 요청값이 아니다.
    ** 유저가 '건너뛰기'를 선택했을 경우 email, password, nickname 값만 넣어 요청한다. +
       (-> 이 경우 mytaminHour, mytaminMin의 초기값은 null)
    ** 마이타민 섭취 시간 정보는 추후 관련 기능 구현 시 변경 가능성이 있다.

operation::auth/signup[snippets='http-request,http-response']
operation::auth/signup[snippets='request-fields,response-fields']

==== Exception Response
* 회원 가입 요청 전 아래의 예외 상황들에 대해 미리 처리가 되었다고 가정한다. (가급적 발생하지 않아야 할 오류)
* EMAIL_PATTERN_ERROR : 이메일 형식이 정해진 패턴("^[_a-z0-9-]+(.[_a-z0-9-]+)*@(?:\w+\.)+\w+$")과 다를 경우
* PASSWORD_PATTERN_ERROR : 비밀번호가 정해진 패턴("^(?=.\*[0-9])(?=.*[A-Za-z]).{8,30}$")과 다를 경우

include::{snippets}/auth/signup_EMAIL_PATTERN_ERROR/http-response.adoc[]
include::{snippets}/auth/signup_PASSWORD_PATTERN_ERROR/http-response.adoc[]
include::{snippets}/auth/signup_NICKNAME_DUPLICATE_ERROR/http-response.adoc[]
include::{snippets}/auth/signup_USER_ALREADY_EXIST_ERROR/http-response.adoc[]

=== 기본 로그인
operation::auth/defaultLogin[snippets='http-request,http-response']
operation::auth/defaultLogin[snippets='request-fields,response-fields']

==== Exception Response
include::{snippets}/auth/defaultLogin_PASSWORD_MISMATCH_ERROR/http-response.adoc[]
include::{snippets}/auth/defaultLogin_USER_NOT_FOUND_ERROR/http-response.adoc[]

=== 이메일 중복 체크
operation::auth/checkEmailDuplication[snippets='http-request,http-response']
operation::auth/checkEmailDuplication[snippets='path-parameters,response-fields']

=== 닉네임 중복 체크
operation::auth/checkNicknameDuplication[snippets='http-request,http-response']
operation::auth/checkNicknameDuplication[snippets='path-parameters,response-fields']

=== 토큰 재발급
* 새로 발급한 accessToken과 기존의 refreshToken을 리턴한다.
    ** refreshToken의 만료 기간이 2일 이내로 남았을 경우 refreshToken 또한 새로 발급한다.
* 만약 403 응답(= refreshToken 만료)일 경우에는 재로그인하도록 한다.

operation::auth/reissue[snippets='http-request,http-response']
operation::auth/reissue[snippets='request-fields,response-fields']

==== Exception Response
* INVALID_TOKEN_ERROR : DB에 저장된 refresh 토큰과 일치하지 않는 경우 (= refreshToken 자체가 잘못 되었거나 만료된 경우)

include::{snippets}/auth/reissue_INVALID_TOKEN_ERROR/http-response.adoc[]
include::{snippets}/auth/reissue_USER_NOT_FOUND_ERROR/http-response.adoc[]

== Home
=== 웰컴 메세지
* 시간에 따른 웰컴 메시지를 리턴한다.
       ** am 5:00 ~ am 11:59 : 오늘도 힘차게 시작해볼까요 ?
       ** pm 12:00 ~ pm 18:59 : 어떤 하루를 보내고 계신가요 ?
       ** pm 19:00 ~ am 4:59 : 푹 쉬고 내일 만나요
* (추후 업데이트 예정) 마이타민 섭취 여부에 따른 메세지 구현 전

operation::home/welcome[snippets='http-request,http-response']
operation::home/welcome[snippets='request-headers,response-fields']

=== 숨 고르기 완료
* 유저가 '숨 고르기' 행동을 완료했다면 해당 API를 요청한다.

operation::home/completeBreath[snippets='http-request,http-response']
operation::home/completeBreath[snippets='request-headers,response-fields']

=== 감각 깨우기 완료
* 유저가 '감각 깨우기' 행동을 완료했다면 해당 API를 요청한다.

operation::home/completeSense[snippets='http-request,http-response']
operation::home/completeSense[snippets='request-headers,response-fields']

=== 행동 완료 상태
* 1 ~ 4번 행동에 대해 유저가 행동을 완료했다면 true, 완료하지 않았다면 false를 리턴한다.
* (추후 업데이트 예정) 임시적으로 reportIsDone, careIdDone의 경우 항상 false를 리턴한다.

operation::home/getProgressStatus[snippets='http-request,http-response']
operation::home/getProgressStatus[snippets='request-headers,response-fields']

